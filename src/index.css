@import "tailwindcss";

:root {
  --grid-cols: 128;
  --grid-rows: 64;
  --grid-line-color: rgba(0, 0, 0, 0.12);
  --grid-background: #ebebec;
}

.viewport-grid-128x64 {
  width: 100vw;
  height: 100vh;
  display: grid;
  grid-template-columns: repeat(var(--grid-cols), 1fr);
  grid-template-rows: repeat(var(--grid-rows), 1fr);
  background-color: var(--grid-background);
  background-image:
    repeating-linear-gradient(
      to right,
      var(--grid-line-color) 0 1px,
      transparent 1px calc(100%/var(--grid-cols))
    ),
    repeating-linear-gradient(
      to bottom,
      var(--grid-line-color) 0 1px,
      transparent 1px calc(100%/var(--grid-rows))
    );
  background-repeat: no-repeat, no-repeat;
  background-size: 100% 100%;
}

/* Layout helpers */
.layout-grid { isolation: isolate; }

/* Sidebar occupying 22 columns on the left */
.sidebar-left-22 {
  grid-column: 1 / span 22;
  grid-row: 1 / -1;
  background: #30393f;
  position: relative;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.35);
  z-index: 6;
}

/* Top header occupying 3 rows, above sidebar */
.app-header-3 {
  grid-column: 1 / -1;
  grid-row: 1 / span 3;
  background: #30393f;
  color: #ffffff;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
}
/* Visible divider between header and sidebar */
.sidebar-left-22::before {
  content: "";
  position: absolute;
  top: calc((100vh / var(--grid-rows)) * 3 + 2px);
  left: 0;
  right: 0;
  height: 1px;
  background: rgba(255, 255, 255, 0.2);
  pointer-events: none;
  z-index: 5;
}
.app-header-content { display: flex; align-items: center; justify-content: space-between; height: 100%; padding: 0 16px; }
.app-header-left { display: inline-flex; align-items: center; gap: 8px; }
.app-header-logo { height: 20px; display: block; }
.app-header-brand { display: inline-flex; align-items: center; gap: 6px; margin-left: 8px; color: #ffffff; font-weight: 700; }
.app-header-brand-accent { color: #ff8b33; }
.app-header-right { display: inline-flex; align-items: center; gap: 8px; }

/* Header route info */
.app-header-route { display: inline-flex; flex-direction: column; align-items: flex-start; gap: 4px; color: #ffffff; }
.app-header-title { color: #ffffff; font-weight: 700; margin: 0; }
.header-breadcrumbs { color: #ffffff; }
.header-breadcrumb-link { color: #ffffff; text-decoration: none; }
.header-breadcrumb-link:hover { text-decoration: underline; }
.header-breadcrumb-text { color: #ffffff; opacity: 0.85; }

/* Page breadcrumbs */
.page-breadcrumbs { color: inherit; margin: 0 0 12px; }
.page-breadcrumb-link { color: inherit; text-decoration: none; }
.page-breadcrumb-link:hover { text-decoration: underline; }
.page-breadcrumb-text { color: inherit; opacity: 0.8; }
.page-breadcrumb-current-action { cursor: pointer; }
.page-breadcrumb-current-action:hover { text-decoration: underline; }
.report-date-range-input { width: 100%; }
.MuiDialog-root .rs-picker-popup { z-index: 1500; }
.header-action-btn .MuiSvgIcon-root { color: #ffffff; }

/* Sidebar content container */
.sidebar-nav {
  height: 100%;
  padding: 16px;
  padding-top: calc((100vh / var(--grid-rows)) * 3 + 2px);
  overflow-y: auto;
  color: #ffffff;
}

/* Main content area between header and sidebar */
.content-area {
  grid-column: 23 / -1;
  grid-row: 4 / -1;
  overflow: auto;
  padding: 16px;
  background: #ebebec;
}

/* Collapsed sidebar layout */
.layout-grid.sidebar-collapsed .sidebar-left-22 { position: fixed; left: 0; bottom: 0; top: calc((100vh / var(--grid-rows)) * 3 + 2px); width: 32px; z-index: 9; }
.layout-grid.sidebar-collapsed .content-area { grid-column: 1 / -1; margin-left: 32px; }
/* Icon-only sidebar visuals when collapsed */
.layout-grid.sidebar-collapsed .sidebar-nav { padding: 6px; }
.layout-grid.sidebar-collapsed .MuiTreeItem-iconContainer { display: none; }
.layout-grid.sidebar-collapsed .sidebar-tree .MuiTreeItem-root[style*="--TreeView-itemDepth: 1"] { display: none; }
.layout-grid.sidebar-collapsed .tree-item-label-text { display: none; }
.layout-grid.sidebar-collapsed .tree-item-label { justify-content: center; }
.layout-grid.sidebar-collapsed .sidebar-tree .MuiTreeItem-content { padding: 6px 0; }
.layout-grid.sidebar-collapsed .tree-item-label-icon { margin: 6px 0; }
.home-title { margin: 0 0 12px; font-weight: 700; }

/* Home sections based on first-level menu (excluding Главная) */
.home-page { display: block; background: #ebebec; min-height: 100%; position: relative; }
/* Background silhouettes on Home (disabled for solid color) */
.home-page::before,
.home-page::after {
  content: none;
  background: none;
}
.home-section { margin: 16px 0 24px; }
.section-title { margin: 0 0 12px; font-weight: 700; font-size: 16px; }
.cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 12px; }
.feature-card { border-radius: 24px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12); overflow: hidden; }
.feature-card:hover { box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16); }

/* Themed backgrounds for home cards */
.feature-card--srvp {
  background:
    radial-gradient(120px 80px at 85% 85%, rgba(48, 57, 63, 0.06), transparent 70%),
    linear-gradient(135deg, #f2f3f4 0%, #e6e7e9 100%),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 180'><path d='M20 150 C80 120, 120 100, 180 120 S260 160, 300 110' fill='none' stroke='%2330393f' stroke-width='3' stroke-opacity='0.18' stroke-dasharray='6 6'/><circle cx='20' cy='150' r='4' fill='%23ff8b33' fill-opacity='0.8'/><circle cx='180' cy='120' r='4' fill='%23ff8b33' fill-opacity='0.8'/><circle cx='300' cy='110' r='4' fill='%23ff8b33' fill-opacity='0.8'/></svg>") no-repeat right -10px bottom -10px/60% auto;
}

.feature-card--geocode {
  background:
    radial-gradient(200px 200px at 110% -10%, rgba(48, 57, 63, 0.06), transparent 60%),
    linear-gradient(135deg, #f2f3f4 0%, #e7e8ea 100%),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 180'><g fill='none'><circle cx='90' cy='60' r='40' stroke='%2330393f' stroke-opacity='0.12'/><circle cx='90' cy='60' r='24' stroke='%2330393f' stroke-opacity='0.12'/><path d='M230 40 c20 0 36 16 36 36 0 28-36 64-36 64s-36-36-36-64c0-20 16-36 36-36z' fill='%2330393f' fill-opacity='0.08'/><circle cx='230' cy='76' r='6' fill='%23ff8b33' fill-opacity='0.9'/></g></svg>") no-repeat right -20px bottom -15px/60% auto;
}

.feature-card--report {
  background:
    radial-gradient(140px 100px at -10% -20%, rgba(48, 57, 63, 0.06), transparent 60%),
    linear-gradient(135deg, #f2f3f4 0%, #e6e7e9 100%),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 180'><rect x='200' y='60' width='18' height='80' rx='4' fill='%2330393f' fill-opacity='0.12'/><rect x='224' y='40' width='18' height='100' rx='4' fill='%2330393f' fill-opacity='0.16'/><rect x='248' y='90' width='18' height='50' rx='4' fill='%2330393f' fill-opacity='0.12'/><rect x='272' y='70' width='18' height='70' rx='4' fill='%2330393f' fill-opacity='0.14'/><polyline points='30,140 70,120 110,135 150,100 190,110' fill='none' stroke='%23ff8b33' stroke-width='3' stroke-opacity='0.9' stroke-linecap='round' stroke-linejoin='round'/></svg>") no-repeat right -10px bottom -10px/55% auto;
}
.feature-card-title { font-weight: 600; }
.feature-card-content p { margin: 0; }

/* Ensure MUI tree inherits white text and icons */
.sidebar-tree .MuiTreeItem-label { color: #ffffff; }
.sidebar-tree .MuiSvgIcon-root { color: #ffffff; }

/* Inter-item vertical spacing */
.sidebar-tree .MuiTreeItem-root + .MuiTreeItem-root > .MuiTreeItem-content { margin-top: 10px; }
/* First item (home) top offset equal to spacing */
.sidebar-tree li[id$="-home"] > .MuiTreeItem-content { margin-top: 10px; }

/* Custom label structure */
.tree-item-label { display: inline-flex; align-items: center; gap: 8px; color: #ffffff; }
.tree-item-label-icon { display: inline-flex; }
.tree-item-label-text { line-height: 1.25; }
.tree-link { display: inline-flex; align-items: center; gap: 8px; color: inherit; text-decoration: none; }
/* Second-level items (depth 1) font size: 10px */
.sidebar-tree .MuiTreeItem-root[style*="--TreeView-itemDepth: 1"] .tree-item-label-text { font-size: 10px; }
