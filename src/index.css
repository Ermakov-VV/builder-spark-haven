:root {
  --grid-cols: 128;
  --grid-rows: 64;
  --grid-line-color: rgba(0, 0, 0, 0.12);
  --grid-background: #ebebec;
}

.viewport-grid-128x64 {
  width: 100vw;
  height: 100vh;
  display: grid;
  grid-template-columns: repeat(var(--grid-cols), 1fr);
  grid-template-rows: repeat(var(--grid-rows), 1fr);
  background-color: var(--grid-background);
  background-image:
    repeating-linear-gradient(
      to right,
      var(--grid-line-color) 0 1px,
      transparent 1px calc(100%/var(--grid-cols))
    ),
    repeating-linear-gradient(
      to bottom,
      var(--grid-line-color) 0 1px,
      transparent 1px calc(100%/var(--grid-rows))
    );
  background-repeat: no-repeat, no-repeat;
  background-size: 100% 100%;
}

/* Layout helpers */
.layout-grid { isolation: isolate; }

/* Sidebar occupying 22 columns on the left */
.sidebar-left-22 {
  grid-column: 1 / span 22;
  grid-row: 1 / -1;
  background: #30393f;
  position: relative;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.35);
  z-index: 6;
}

/* Top header occupying 3 rows, above sidebar */
.app-header-3 {
  grid-column: 1 / -1;
  grid-row: 1 / span 3;
  background: #30393f;
  color: #ffffff;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
}
/* Visible divider between header and sidebar */
.sidebar-left-22::before {
  content: "";
  position: absolute;
  top: calc((100vh / var(--grid-rows)) * 3 + 2px);
  left: 0;
  right: 0;
  height: 1px;
  background: rgba(255, 255, 255, 0.2);
  pointer-events: none;
  z-index: 5;
}
.app-header-content { display: flex; align-items: center; justify-content: space-between; height: 100%; padding: 0 16px; }
.app-header-left { display: inline-flex; align-items: center; gap: 8px; }
.app-header-logo { height: 20px; display: block; }
.app-header-brand { display: inline-flex; align-items: center; gap: 6px; margin-left: 8px; color: #ffffff; font-weight: 700; }
.app-header-brand-accent { color: #ff8b33; }
.app-header-right { display: inline-flex; align-items: center; gap: 8px; }

/* Header route info */
.app-header-route { display: inline-flex; flex-direction: column; align-items: flex-start; gap: 4px; color: #ffffff; }
.app-header-title { color: #ffffff; font-weight: 700; margin: 0; }
.header-breadcrumbs { color: #ffffff; }
.header-breadcrumb-link { color: #ffffff; text-decoration: none; }
.header-breadcrumb-link:hover { text-decoration: underline; }
.header-breadcrumb-text { color: #ffffff; opacity: 0.85; }

/* Page breadcrumbs */
.page-breadcrumbs { color: inherit; margin: 0 0 12px; }
.page-breadcrumb-link { color: inherit; text-decoration: none; }
.page-breadcrumb-link:hover { text-decoration: underline; }
.page-breadcrumb-text { color: inherit; opacity: 0.8; }
.page-breadcrumb-current-action { cursor: pointer; }
.page-breadcrumb-current-action:hover { text-decoration: underline; }

/* Breadcrumbs with right-aligned actions */
.breadcrumbs-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.breadcrumbs-actions { display: inline-flex; align-items: center; gap: 8px; color: inherit; }
.breadcrumbs-date-range { font-size: 16px; font-weight: 700; opacity: 0.9; line-height: 1.2; }
.breadcrumbs-filter-btn { min-width: 0; padding: 4px 6px; }

.report-date-range-input { width: 100%; }
.report-date-range-input.is-invalid .rs-picker-toggle,
.report-date-range-input.is-invalid .rs-picker-toggle:hover { border-color: #d32f2f; }
.planning-select-container.is-invalid .planning__control { border-color: #d32f2f; box-shadow: inset 0 0 0 1px #d32f2f; }
.field-error-text { color: #d32f2f; font-size: 12px; margin-top: 4px; margin-left: calc(120px + 12px); }
.MuiDialog-root .rs-picker-popup { z-index: 1500; }
.report-date-range-row { display: flex; align-items: center; gap: 12px; }
.report-date-range-label { min-width: 120px; opacity: 0.8; }
.report-date-range-input { flex: 0 0 auto; width: 280px; max-width: 100%; }
.planning-picker-row { display: flex; align-items: center; gap: 12px; margin-top: 12px; width: 100%; }
.planning-picker-label { min-width: 120px; opacity: 0.8; }
.planning-picker-input { flex: 1 1 auto; width: 100%; max-width: 100%; min-width: 0; }
/* React-Select planning option layout */
.planning-option { display: grid; grid-template-columns: 20px 90px 1fr; gap: 12px; align-items: center; }
.planning-option .option-code { font-weight: 600; padding-right: 8px; border-right: 1px solid rgba(0,0,0,0.12); }
.planning-option .option-name { padding-left: 8px; }
.planning-option .option-checkbox { display: inline-flex; justify-content: center; }
/* Select all row aligned with options */
.planning-select-all-row { display: grid; grid-template-columns: 20px 1fr; gap: 12px; align-items: center; padding: 6px 8px; border-bottom: 1px solid rgba(0,0,0,0.08); }
/* Prevent react-select from growing with chips */
.planning-select-container { width: 100%; }
.planning-select-container .planning__control { width: 100%; min-width: 0; }
.planning-select-container .planning__value-container { overflow: hidden; flex-wrap: nowrap; }
.planning-select-container .planning__multi-value { max-width: 100%; }
.planning-select-container .planning__placeholder { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.report-params-group { display: inline-block; width: calc(120px + 12px + 280px); max-width: 100%; box-sizing: border-box; }
.report-params-group .report-date-range-row { width: 100%; }
.report-params-group .planning-picker-row { width: 100%; }
/* Keep old RSuite menu styles harmless (no longer used for planning) */
.rs-picker-menu .rs-checkbox { display: flex; align-items: center; padding: 6px 8px; }
.rs-picker-menu .rs-checkbox .rs-checkbox-checker { width: 100%; }
.rs-picker-menu .rs-checkbox .rs-checkbox-label { width: 100%; }
.planning-picker-footer .rs-checkbox .rs-checkbox-checker,
.planning-picker-footer .rs-checkbox .rs-checkbox-label { width: 100%; }
.rs-picker-menu .planning-item { display: grid; grid-template-columns: 90px 1fr; gap: 12px; align-items: center; }
.rs-picker-menu .planning-item .col-mpt { font-weight: 600; padding-right: 8px; border-right: 1px solid rgba(0,0,0,0.12); }
.rs-picker-menu .planning-item .col-name { padding-left: 8px; }
.rs-picker-menu .planning-menu-header { display: grid; grid-template-columns: 90px 1fr; gap: 12px; padding: 4px 8px; font-size: 12px; opacity: 0.7; border-bottom: 1px solid rgba(0,0,0,0.08); }
.planning-picker-footer { padding: 0; border-top: 1px solid rgba(0,0,0,0.08); }
.planning-picker-footer .rs-checkbox { display: flex; align-items: center; padding: 6px 8px; }
.planning-footer-action { background: none; border: 0; color: #1976d2; cursor: pointer; padding: 4px 0; }
.planning-footer-action:hover { text-decoration: underline; }
.header-action-btn .MuiSvgIcon-root { color: #ffffff; }

/* Sidebar content container */
.sidebar-nav {
  height: 100%;
  padding: 16px;
  padding-top: calc((100vh / var(--grid-rows)) * 3 + 2px);
  overflow-y: auto;
  color: #ffffff;
}

/* Main content area between header and sidebar */
.content-area {
  grid-column: 23 / -1;
  grid-row: 4 / -1;
  overflow: auto;
  padding: 16px;
  background: #ebebec;
}

/* Collapsed sidebar layout */
.layout-grid.sidebar-collapsed .sidebar-left-22 { position: fixed; left: 0; bottom: 0; top: calc((100vh / var(--grid-rows)) * 3 + 2px); width: 32px; z-index: 9; }
.layout-grid.sidebar-collapsed .content-area { grid-column: 1 / -1; margin-left: 32px; }
/* Icon-only sidebar visuals when collapsed */
.layout-grid.sidebar-collapsed .sidebar-nav { padding: 6px; }
.layout-grid.sidebar-collapsed .MuiTreeItem-iconContainer { display: none; }
.layout-grid.sidebar-collapsed .sidebar-tree .MuiTreeItem-root[style*="--TreeView-itemDepth: 1"] { display: none; }
.layout-grid.sidebar-collapsed .tree-item-label-text { display: none; }
.layout-grid.sidebar-collapsed .tree-item-label { justify-content: center; }
.layout-grid.sidebar-collapsed .sidebar-tree .MuiTreeItem-content { padding: 6px 0; }
.layout-grid.sidebar-collapsed .tree-item-label-icon { margin: 6px 0; }
.home-title { margin: 0 0 12px; font-weight: 700; }
/* Grid background on transport report page */
.reports-transport-page {
  position: relative;
  min-height: 100%;
  background-color: var(--grid-background);
  background-image: none;
  background-repeat: no-repeat;
  background-size: auto;
}

.transport-grid { display: grid; grid-template-columns: repeat(2, minmax(220px, 1fr)); gap: 12px; margin: 12px 0 16px; }
.transport-card-wrapper { height: calc((100vh / var(--grid-rows)) * 15); border-radius: 16px; }
.transport-card-wrapper.full-width { grid-column: 1 / -1; }
.transport-card-wrapper.taller-16 { height: calc((100vh / var(--grid-rows)) * 16); }
.transport-card-wrapper.taller-17 { height: calc((100vh / var(--grid-rows)) * 17); }
.transport-card-wrapper.fixed-250 { height: 250px; }
.transport-card-wrapper.fixed-500 { height: 500px; }
.transport-card-wrapper.full-rest { height: auto; }
.transport-card-wrapper.full-rest .transport-card { height: auto; }
.transport-card-wrapper.drag-over { outline: 2px dashed #1976d2; outline-offset: -4px; }
.transport-card { background: #fff; border-radius: 16px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12); height: 100%; padding: 12px; box-sizing: border-box; user-select: none; will-change: transform; transition: transform 250ms ease, box-shadow 150ms ease; display: flex; flex-direction: column; }
.transport-card.is-dragging { transform: scale(1.02); box-shadow: 0 14px 30px rgba(0,0,0,0.2); }
/* Card 1 themed background: soft gray with clustered gear icons */
.transport-card.gears-theme {
  background:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23999' fill-opacity='0.22' d='M19.14 12.94a7.4 7.4 0 0 0 0-1.88l2.03-1.58c.1-.08.13-.22.07-.34l-1.92-3.32a.28.28 0 0 0-.34-.13l-2.39.96a7.6 7.6 0 0 0-1.63-.95l-.36-2.54c-.02-.13-.13-.22-.26-.22h-3.84c-.13 0-.24.09-.26.22l-.36 2.54c-.57.23-1.12.55-1.63.95l-2.39-.96a.28.28 0 0 0-.34.13L2.71 8.83c-.06.12-.03.26.07.34l2.03 1.58c-.04.31-.07.62-.07.94 0 .32.03.63.07.94l-2.03 1.58a.28.28 0 0 0-.07.34l1.92 3.32c.07.12.22.17.34.13l2.39-.96c.5.39 1.05.72 1.63.95l.36 2.54c.02.13.13.22.26.22h3.84c.13 0 .24-.09.26-.22l.36-2.54c.58-.23 1.13-.55 1.63-.95l2.39.96c.12.04.27-.01.34-.13l1.92-3.32a.28.28 0 0 0-.07-.34l-2.01-1.58Z'/><circle cx='12' cy='12' r='3.2' fill='%23999' fill-opacity='0.32'/></svg>") no-repeat 82% 30% / 41px 41px,
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23999' fill-opacity='0.20' d='M19.14 12.94a7.4 7.4 0 0 0 0-1.88l2.03-1.58c.1-.08.13-.22.07-.34l-1.92-3.32a.28.28 0 0 0-.34-.13l-2.39.96a7.6 7.6 0 0 0-1.63-.95l-.36-2.54c-.02-.13-.13-.22-.26-.22h-3.84c-.13 0-.24.09-.26.22l-.36 2.54c-.57.23-1.12.55-1.63.95l-2.39-.96a.28.28 0 0 0-.34.13L2.71 8.83c-.06.12-.03.26.07.34l2.03 1.58c-.04.31-.07.62-.07.94 0 .32.03.63.07.94l-2.03 1.58a.28.28 0 0 0-.07.34l1.92 3.32c.07.12.22.17.34.13l2.39-.96c.5.39 1.05.72 1.63.95l.36 2.54c.02.13.13.22.26.22h3.84c.13 0 .24-.09.26-.22l.36-2.54c.58-.23 1.13-.55 1.63-.95l2.39.96c.12.04.27-.01.34-.13l1.92-3.32a.28.28 0 0 0-.07-.34l-2.01-1.58Z'/><circle cx='12' cy='12' r='3.2' fill='%23999' fill-opacity='0.28'/></svg>") no-repeat 87% 45% / 34px 34px,
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23999' fill-opacity='0.18' d='M19.14 12.94a7.4 7.4 0 0 0 0-1.88l2.03-1.58c.1-.08.13-.22.07-.34l-1.92-3.32a.28.28 0 0 0-.34-.13l-2.39.96a7.6 7.6 0 0 0-1.63-.95l-.36-2.54c-.02-.13-.13-.22-.26-.22h-3.84c-.13 0-.24.09-.26.22l-.36 2.54c-.57.23-1.12.55-1.63.95l-2.39-.96a.28.28 0 0 0-.34.13L2.71 8.83c-.06.12-.03.26.07.34l2.03 1.58c-.04.31-.07.62-.07.94 0 .32.03.63.07.94l-2.03 1.58a.28.28 0 0 0-.07.34l1.92 3.32c.07.12.22.17.34.13l2.39-.96c.5.39 1.05.72 1.63.95l.36 2.54c.02.13.13.22.26.22h3.84c.13 0 .24-.09.26-.22l.36-2.54c.58-.23 1.13-.55 1.63-.95l2.39.96c.12.04.27-.01.34-.13l1.92-3.32a.28.28 0 0 0-.07-.34l-2.01-1.58Z'/><circle cx='12' cy='12' r='3.2' fill='%23999' fill-opacity='0.26'/></svg>") no-repeat 78% 58% / 26px 26px,
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23999' fill-opacity='0.20' d='M19.14 12.94a7.4 7.4 0 0 0 0-1.88l2.03-1.58c.1-.08.13-.22.07-.34l-1.92-3.32a.28.28 0 0 0-.34-.13l-2.39.96a7.6 7.6 0 0 0-1.63-.95l-.36-2.54c-.02-.13-.13-.22-.26-.22h-3.84c-.13 0-.24.09-.26.22l-.36 2.54c-.57.23-1.12.55-1.63.95l-2.39-.96a.28.28 0 0 0-.34.13L2.71 8.83c-.06.12-.03.26.07.34l2.03 1.58c-.04.31-.07.62-.07.94 0 .32.03.63.07.94l-2.03 1.58a.28.28 0 0 0-.07.34l1.92 3.32c.07.12.22.17.34.13l2.39-.96c.5.39 1.05.72 1.63.95l.36 2.54c.02.13.13.22.26.22h3.84c.13 0 .24-.09.26-.22l.36-2.54c.58-.23 1.13-.55 1.63-.95l2.39.96c.12.04.27-.01.34-.13l1.92-3.32a.28.28 0 0 0-.07-.34l-2.01-1.58Z'/><circle cx='12' cy='12' r='3.2' fill='%23999' fill-opacity='0.24'/></svg>") no-repeat 90% 68% / 36px 36px,
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23999' fill-opacity='0.18' d='M19.14 12.94a7.4 7.4 0 0 0 0-1.88l2.03-1.58c.1-.08.13-.22.07-.34l-1.92-3.32a.28.28 0 0 0-.34-.13l-2.39.96a7.6 7.6 0 0 0-1.63-.95l-.36-2.54c-.02-.13-.13-.22-.26-.22h-3.84c-.13 0-.24.09-.26.22l-.36 2.54c-.57.23-1.12.55-1.63.95l-2.39-.96a.28.28 0 0 0-.34.13L2.71 8.83c-.06.12-.03.26.07.34l2.03 1.58c-.04.31-.07.62-.07.94 0 .32.03.63.07.94l-2.03 1.58a.28.28 0 0 0-.07.34l1.92 3.32c.07.12.22.17.34.13l2.39-.96c.5.39 1.05.72 1.63.95l.36 2.54c.02.13.13.22.26.22h3.84c.13 0 .24-.09.26-.22l.36-2.54c.58-.23 1.13-.55 1.63-.95l2.39.96c.12.04.27-.01.34-.13l1.92-3.32a.28.28 0 0 0-.07-.34l-2.01-1.58Z'/><circle cx='12' cy='12' r='3.2' fill='%23999' fill-opacity='0.22'/></svg>") no-repeat 72% 40% / 24px 24px,
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23999' fill-opacity='0.18' d='M19.14 12.94a7.4 7.4 0 0 0 0-1.88l2.03-1.58c.1-.08.13-.22.07-.34l-1.92-3.32a.28.28 0 0 0-.34-.13l-2.39.96a7.6 7.6 0 0 0-1.63-.95l-.36-2.54c-.02-.13-.13-.22-.26-.22h-3.84c-.13 0-.24.09-.26.22l-.36 2.54c-.57.23-1.12.55-1.63.95l-2.39-.96a.28.28 0 0 0-.34.13L2.71 8.83c-.06.12-.03.26.07.34l2.03 1.58c-.04.31-.07.62-.07.94 0 .32.03.63.07.94l-2.03 1.58a.28.28 0 0 0-.07.34l1.92 3.32c.07.12.22.17.34.13l2.39-.96c.5.39 1.05.72 1.63.95l.36 2.54c.02.13.13.22.26.22h3.84c.13 0 .24-.09.26-.22l.36-2.54c.58-.23 1.13-.55 1.63-.95l2.39.96c.12.04.27-.01.34-.13l1.92-3.32a.28.28 0 0 0-.07-.34l-2.01-1.58Z'/><circle cx='12' cy='12' r='3.2' fill='%23999' fill-opacity='0.20'/></svg>") no-repeat 60% 55% / 29px 29px,
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23999' fill-opacity='0.16' d='M19.14 12.94a7.4 7.4 0 0 0 0-1.88l2.03-1.58c.1-.08.13-.22.07-.34l-1.92-3.32a.28.28 0 0 0-.34-.13l-2.39.96a7.6 7.6 0 0 0-1.63-.95l-.36-2.54c-.02-.13-.13-.22-.26-.22h-3.84c-.13 0-.24.09-.26.22l-.36 2.54c-.57.23-1.12.55-1.63.95l-2.39-.96a.28.28 0 0 0-.34.13L2.71 8.83c-.06.12-.03.26.07.34l2.03 1.58c-.04.31-.07.62-.07.94 0 .32.03.63.07.94l-2.03 1.58a.28.28 0 0 0-.07.34l1.92 3.32c.07.12.22.17.34.13l2.39-.96c.5.39 1.05.72 1.63.95l.36 2.54c.02.13.13.22.26.22h3.84c.13 0 .24-.09.26-.22l.36-2.54c.58-.23 1.13-.55 1.63-.95l2.39.96c.12.04.27-.01.34-.13l1.92-3.32a.28.28 0 0 0-.07-.34l-2.01-1.58Z'/><circle cx='12' cy='12' r='3.2' fill='%23999' fill-opacity='0.18'/></svg>") no-repeat 68% 72% / 31px 31px,
    linear-gradient(135deg, #ffffff 0%, #f5f6f7 40%, #e6e7e9 100%);
}

/* Summary stat block styles */
.stat-summary-block { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px; height: 100%; }
.stat-summary-value { font-weight: 800; font-size: 32px; line-height: 1; }
.stat-summary-label { font-size: 12px; opacity: 0.75; text-align: center; }
.transport-card-title { font-weight: 600; opacity: 0.9; }
.transport-card:hover { box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16); }
.transport-card-content { margin-top: 8px; overflow: auto; cursor: default; flex: 1; min-height: 0; }
.card-drag-handle { display: flex; align-items: center; justify-content: center; height: 12px; margin: 2px auto; color: #9e9e9e; cursor: grab; }
.transport-card.is-dragging .card-drag-handle { cursor: grabbing; }
.card-drag-handle svg { width: 16px; height: 8px; opacity: 0.9; }
.table-global-filter-row { margin: 0 0 8px; }
.table-controls-row { display: flex; justify-content: flex-end; margin: 0 0 8px; }
.table-toolbar-row { display: flex; align-items: center; gap: 8px; margin: 0 0 8px; }
.toolbar-search-grow { flex: 1 1 auto; }
.routes-listbox { margin: 0; padding: 0 0 0 18px; }
.driver-cell { display: flex; flex-direction: column; line-height: 1.25; }
.driver-name { font-weight: 600; }
.driver-meta { font-size: 12px; color: rgba(0,0,0,0.6); }
.columns-menu-button { color: #b0b0b0; min-width: 0; padding: 4px; }

/* Progress summary styles for transport report */
.progress-summary { display: flex; flex-direction: column; gap: 8px; width: 100%; }
.progress-row { display: flex; flex-direction: column; gap: 4px; width: 100%; }
.progress-meta { display: flex; align-items: baseline; justify-content: space-between; font-size: 12px; opacity: 0.9; }
.progress-label { font-weight: 600; }
.progress-count { font-weight: 700; }
.progress-bar { width: 100%; height: 8px; border-radius: 8px; }

/* Violations card (Card 2) summary and KPIs */
.violations-summary { display: grid; grid-template-rows: auto 1fr; gap: 12px; }
.violations-summary-header { display: flex; flex-direction: column; align-items: center; gap: 6px; }
.violations-kpi-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
.violations-kpi { display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 6px 4px; }
.violations-kpi-value { font-weight: 800; font-size: 24px; line-height: 1; }
.violations-kpi-icon svg { width: 20px; height: 20px; opacity: 0.9; }
.violations-kpi-caption { font-size: 12px; opacity: 0.75; text-align: center; }

/* Card 1 custom analytics layout */
.card1-analytics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; height: 100%; align-items: stretch; grid-auto-rows: 1fr; min-height: 0; }
.card1-summary-left { display: grid; grid-template-rows: auto auto auto; gap: 12px; align-content: stretch; justify-items: center; height: 100%; align-self: stretch; min-height: 0; }
.card1-total { display: flex; flex-direction: column; align-items: center; text-align: center; }
.card1-total .stat-summary-value { font-size: 32px; line-height: 1; font-weight: 800; }
.card1-total .stat-summary-label { font-size: 12px; opacity: 0.75; }
.kpi-inline { display: flex; flex-direction: column; align-items: center; gap: 4px; text-align: center; }
.kpi-row { display: inline-flex; align-items: center; gap: 4px; }
.card1-summary-left .kpi-inline:first-of-type .kpi-row { gap: 4px; }
.kpi-text { display: flex; flex-direction: column; }
.kpi-number { font-weight: 800; font-size: 20px; line-height: 1; }
.kpi-caption { font-size: 12px; opacity: 0.75; text-align: center; }
.kpi-icon-left svg { width: 20px; height: 20px; opacity: 0.9; }
.kpi-icon-left { margin-right: 0; display: inline-flex; }
/* Color KPI icons to match chart colors */
.card1-summary-left > .kpi-inline:nth-child(2) .kpi-icon-left { color: #008ffb; }
.card1-summary-left > .kpi-inline:nth-child(3) .kpi-icon-left { color: #9c27b0; }
.card1-summary-right { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; width: 100%; align-self: stretch; min-height: 0; }
.chart-fill { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; }
.chart-fill .apexcharts-canvas, .chart-fill .apexcharts-svg { width: 100% !important; height: 100% !important; }
.donut-svg { width: 100%; height: 100%; display: block; }
/* Hide any arc labels inside MUI PieChart for cards 1 and 2 */
.card1-analytics-grid .MuiChartsArcLabel-root,
.card2-analytics-grid .MuiChartsArcLabel-root { display: none !important; }
.donut-legend { display: flex; gap: 6px; align-items: center; justify-content: center; flex-wrap: wrap; }
.legend-inline { flex-wrap: nowrap; }
.legend-item { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; }
.legend-swatch { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
.legend-ok { background: #008ffb; }
.legend-bad { background: #9c27b0; }
.legend-etp { background: #ff9800; }
.legend-ym { background: #f44336; }
.legend-order { background: #2196f3; }
/* Restore captions on left KPIs */
.card1-summary-left .kpi-caption { display: block; }
/* Card 2 KPI icon colors to match donut */
.card2-analytics-grid .card1-summary-left > .kpi-inline:nth-child(1) .kpi-icon-left { color: #ff9800; }
.card2-analytics-grid .card1-summary-left > .kpi-inline:nth-child(2) .kpi-icon-left { color: #f44336; }
.card2-analytics-grid .card1-summary-left > .kpi-inline:nth-child(3) .kpi-icon-left { color: #2196f3; }

/* Prevent scrollbars flicker on chart hover in card 4 */
.transport-card-content.no-scroll { overflow: hidden; }
.transport-card-content.no-scroll .apexcharts-tooltip { pointer-events: none; }

/* Equal container sizing and click target for Card 1 KPIs */
.card1-summary-left > .card1-total,
.card1-summary-left > .kpi-inline {
  width: 100%;
  padding: 8px 6px;
  border-radius: 8px;
  box-sizing: border-box;
  cursor: pointer;
}
/* No spacing between rows in Card 1 left column */
.card1-analytics-grid .card1-summary-left { gap: 0; }

/* Home sections based on first-level menu (excluding Главная) */
.home-page { display: block; background: #ebebec; min-height: 100%; position: relative; }
/* Background silhouettes on Home (disabled for solid color) */
.home-page::before,
.home-page::after {
  content: none;
  background: none;
}
.home-section { margin: 16px 0 24px; }
.section-title { margin: 0 0 12px; font-weight: 700; font-size: 16px; }
.cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 12px; }
.feature-card { border-radius: 24px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12); overflow: hidden; }
.feature-card:hover { box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16); }

/* Themed backgrounds for home cards */
.feature-card--srvp {
  background:
    radial-gradient(120px 80px at 85% 85%, rgba(48, 57, 63, 0.06), transparent 70%),
    linear-gradient(135deg, #f2f3f4 0%, #e6e7e9 100%),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 180'><path d='M20 150 C80 120, 120 100, 180 120 S260 160, 300 110' fill='none' stroke='%2330393f' stroke-width='3' stroke-opacity='0.18' stroke-dasharray='6 6'/><circle cx='20' cy='150' r='4' fill='%23ff8b33' fill-opacity='0.8'/><circle cx='180' cy='120' r='4' fill='%23ff8b33' fill-opacity='0.8'/><circle cx='300' cy='110' r='4' fill='%23ff8b33' fill-opacity='0.8'/></svg>") no-repeat right -10px bottom -10px/60% auto;
}

.feature-card--geocode {
  background:
    radial-gradient(200px 200px at 110% -10%, rgba(48, 57, 63, 0.06), transparent 60%),
    linear-gradient(135deg, #f2f3f4 0%, #e7e8ea 100%),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 180'><g fill='none'><circle cx='90' cy='60' r='40' stroke='%2330393f' stroke-opacity='0.12'/><circle cx='90' cy='60' r='24' stroke='%2330393f' stroke-opacity='0.12'/><path d='M230 40 c20 0 36 16 36 36 0 28-36 64-36 64s-36-36-36-64c0-20 16-36 36-36z' fill='%2330393f' fill-opacity='0.08'/><circle cx='230' cy='76' r='6' fill='%23ff8b33' fill-opacity='0.9'/></g></svg>") no-repeat right -20px bottom -15px/60% auto;
}

.feature-card--report {
  background:
    radial-gradient(140px 100px at -10% -20%, rgba(48, 57, 63, 0.06), transparent 60%),
    linear-gradient(135deg, #f2f3f4 0%, #e6e7e9 100%),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 180'><rect x='200' y='60' width='18' height='80' rx='4' fill='%2330393f' fill-opacity='0.12'/><rect x='224' y='40' width='18' height='100' rx='4' fill='%2330393f' fill-opacity='0.16'/><rect x='248' y='90' width='18' height='50' rx='4' fill='%2330393f' fill-opacity='0.12'/><rect x='272' y='70' width='18' height='70' rx='4' fill='%2330393f' fill-opacity='0.14'/><polyline points='30,140 70,120 110,135 150,100 190,110' fill='none' stroke='%2330393f' stroke-width='3' stroke-opacity='0.9' stroke-linecap='round' stroke-linejoin='round'/></svg>") no-repeat right -10px bottom -10px/55% auto;
}
.feature-card-title { font-weight: 600; }
.feature-card-content p { margin: 0; }

/* Ensure MUI tree inherits white text and icons */
.sidebar-tree .MuiTreeItem-label { color: #ffffff; }
.sidebar-tree .MuiSvgIcon-root { color: #ffffff; }

/* Inter-item vertical spacing */
.sidebar-tree .MuiTreeItem-root + .MuiTreeItem-root > .MuiTreeItem-content { margin-top: 10px; }
/* First item (home) top offset equal to spacing */
.sidebar-tree li[id$="-home"] > .MuiTreeItem-content { margin-top: 10px; }

/* Custom label structure */
.tree-item-label { display: inline-flex; align-items: center; gap: 8px; color: #ffffff; }
.tree-item-label-icon { display: inline-flex; }
.tree-item-label-text { line-height: 1.25; }
.tree-link { display: inline-flex; align-items: center; gap: 8px; color: inherit; text-decoration: none; }
/* Second-level items (depth 1) font size: 10px */
.sidebar-tree .MuiTreeItem-root[style*="--TreeView-itemDepth: 1"] .tree-item-label-text { font-size: 10px; }

/* Active state highlights for selected filters */
.kpi-inline.is-active { background: rgba(25, 118, 210, 0.08); border: 1px solid #1976d2; border-radius: 8px; }
.card1-total.is-active { background: rgba(25, 118, 210, 0.08); border: 1px solid #1976d2; border-radius: 8px; }
.legend-item.is-active,
.legend-item[aria-pressed="true"] { background: rgba(25, 118, 210, 0.08); border: 1px solid #1976d2; border-radius: 8px; padding: 2px 6px; }
.kpi-inline[aria-pressed="true"] { background: rgba(25, 118, 210, 0.08); border: 1px solid #1976d2; border-radius: 8px; }
